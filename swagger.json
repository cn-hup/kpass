{"swagger":"2.0","info":{"title":"KPass","description":"KPass is a web application to manage password safe.","version":"0.6.0","contact":{"email":"admin@zensh.com"},"license":{}},"host":"127.0.0.1:8088","basePath":"/","paths":{"/api/entries/{entryID}":{"get":{"tags":["Entry"],"summary":"Get the entry","description":"Get the entry with all information, include secrets, files and shares.\nall team members can get the entry","operationId":"Entry.Find","parameters":[{"in":"header","name":"Authorization","description":"access_token","required":true,"type":"string"},{"in":"path","name":"entryID","description":"entry ID","required":true,"type":"string"}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/EntryResult","type":"object"}},"400":{"description":"","schema":{"type":"string"}},"401":{"description":"","schema":{"type":"string"}}}},"put":{"tags":["Entry"],"summary":"Update the entry","description":"all team members can update the entry","operationId":"Entry.Update","parameters":[{"in":"header","name":"Authorization","description":"access_token","required":true,"type":"string"},{"in":"path","name":"entryID","description":"entry ID","required":true,"type":"string"},{"in":"body","name":"body","description":"entry body","required":true,"schema":{}}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/EntrySum","type":"object"}},"204":{"description":""},"400":{"description":"","schema":{"type":"string"}},"401":{"description":"","schema":{"type":"string"}}}},"delete":{"tags":["Entry"],"summary":"Delete the entry","description":"all team members can delete the entry","operationId":"Entry.Delete","parameters":[{"in":"header","name":"Authorization","description":"access_token","required":true,"type":"string"},{"in":"path","name":"entryID","description":"entry ID","required":true,"type":"string"}],"responses":{"204":{"description":""},"400":{"description":"","schema":{"type":"string"}},"401":{"description":"","schema":{"type":"string"}}}}},"/api/entries/{entryID}/files/{fileID}":{"delete":{"tags":["Entry"],"summary":"Delete the file","description":"all team members can delete the file","operationId":"Entry.DeleteFile","parameters":[{"in":"header","name":"Authorization","description":"access_token","required":true,"type":"string"},{"in":"path","name":"entryID","description":"entry ID","required":true,"type":"string"},{"in":"path","name":"fileID","description":"file ID","required":true,"type":"string"}],"responses":{"204":{"description":""},"400":{"description":"","schema":{"type":"string"}},"401":{"description":"","schema":{"type":"string"}}}}},"/api/entries/{entryID}/secrets":{"post":{"tags":["Secret"],"summary":"Create a secret in a entry","description":"all team members can create secret","operationId":"Secret.Create","parameters":[{"in":"header","name":"Authorization","description":"access_token","required":true,"type":"string"},{"in":"path","name":"entryID","description":"entry ID","required":true,"type":"string"},{"in":"body","name":"body","description":"secret body","required":true,"schema":{"$ref":"#/definitions/tplSecretCreate","type":"object"}}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/SecretResult","type":"object"}},"400":{"description":"","schema":{"type":"string"}},"401":{"description":"","schema":{"type":"string"}}}}},"/api/entries/{entryID}/secrets/{secretID}":{"put":{"tags":["Secret"],"summary":"Update the secret","description":"all team members can update the secret","operationId":"Secret.Update","parameters":[{"in":"header","name":"Authorization","description":"access_token","required":true,"type":"string"},{"in":"path","name":"entryID","description":"entry ID","required":true,"type":"string"},{"in":"path","name":"secretID","description":"secret ID","required":true,"type":"string"},{"in":"body","name":"body","description":"secret body","required":true,"schema":{}}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/SecretResult","type":"object"}},"400":{"description":"","schema":{"type":"string"}},"401":{"description":"","schema":{"type":"string"}}}},"delete":{"tags":["Secret"],"summary":"Delete the secret","description":"all team members can delete the secret","operationId":"Secret.Delete","parameters":[{"in":"header","name":"Authorization","description":"access_token","required":true,"type":"string"},{"in":"path","name":"entryID","description":"entry ID","required":true,"type":"string"},{"in":"path","name":"secretID","description":"secret ID","required":true,"type":"string"}],"responses":{"204":{"description":""},"400":{"description":"","schema":{"type":"string"}},"401":{"description":"","schema":{"type":"string"}}}}},"/api/entries/{entryID}/shares":{"post":{"tags":["Share"],"summary":"Create a share of the entry","description":"all team members can create share","operationId":"Share.Create","parameters":[{"in":"header","name":"Authorization","description":"access_token","required":true,"type":"string"},{"in":"path","name":"entryID","description":"entry ID","required":true,"type":"string"},{"in":"body","name":"body","description":"share body","required":true,"schema":{"$ref":"#/definitions/tplShareCreate","type":"object"}}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/ShareResult","type":"object"}},"400":{"description":"","schema":{"type":"string"}},"401":{"description":"","schema":{"type":"string"}}}}},"/api/entries/{entryID}:undelete":{"post":{"tags":["Entry"],"summary":"Undelete the entry","description":"all team members can undelete the entry","operationId":"Entry.Undelete","parameters":[{"in":"header","name":"Authorization","description":"access_token","required":true,"type":"string"},{"in":"path","name":"entryID","description":"entry ID","required":true,"type":"string"}],"responses":{"204":{"description":""},"400":{"description":"","schema":{"type":"string"}},"401":{"description":"","schema":{"type":"string"}}}}},"/api/entries/{teamID}":{"delete":{"tags":["Team"],"summary":"Delete the team","description":"only the team owner can delete the team","operationId":"Team.Delete","parameters":[{"in":"header","name":"Authorization","description":"access_token","required":true,"type":"string"},{"in":"path","name":"teamID","description":"team ID","required":true,"type":"string"}],"responses":{"204":{"description":""},"400":{"description":"","schema":{"type":"string"}},"401":{"description":"","schema":{"type":"string"}}}}},"/api/join":{"post":{"tags":["User"],"summary":"Create a user","description":"Create a user","operationId":"User.Join","parameters":[{"in":"body","name":"body","description":"user info","required":true,"schema":{"$ref":"#/definitions/tplUserJoin","type":"object"}}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/UserResult","type":"object"}},"400":{"description":"","schema":{"type":"string"}},"401":{"description":"","schema":{"type":"string"}}}}},"/api/login":{"post":{"tags":["User"],"summary":"Login","description":"Login with user id and pass, get the new access_token","operationId":"User.Login","parameters":[{"in":"body","name":"body","description":"user auth info","required":true,"schema":{"$ref":"#/definitions/tplUserLogin","type":"object"}}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/AuthResult","type":"object"}},"400":{"description":"","schema":{"type":"string"}},"401":{"description":"","schema":{"type":"string"}}}}},"/api/password":{"get":{"tags":["User"],"summary":"get a random password","description":"get a random password by query options","operationId":"User.Password","parameters":[{"in":"query","name":"len","description":"password length","type":"integer","format":"int32","default":"12"},{"in":"query","name":"num","description":"numbers length that password include","type":"integer","format":"int32","default":"2"},{"in":"query","name":"spec","description":"special characters length that password include","type":"integer","format":"int32","default":"2"}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/PassResult","type":"object"}}}}},"/api/teams":{"get":{"tags":["Team"],"summary":"Get teams for current user","description":"Get teams for current user.","operationId":"Team.FindByMember","parameters":[{"in":"header","name":"Authorization","description":"access_token","required":true,"type":"string"}],"responses":{"200":{"description":"","schema":{"type":"array","items":{"$ref":"#/definitions/TeamResult","type":"object"}}},"400":{"description":"","schema":{"type":"string"}},"401":{"description":"","schema":{"type":"string"}}}},"post":{"tags":["Team"],"summary":"Create a team","description":"Create a team","operationId":"Team.Create","parameters":[{"in":"header","name":"Authorization","description":"access_token","required":true,"type":"string"},{"in":"body","name":"body","description":"team body","required":true,"schema":{"$ref":"#/definitions/tplTeamCreate","type":"object"}}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/TeamResult","type":"object"}},"400":{"description":"","schema":{"type":"string"}},"401":{"description":"","schema":{"type":"string"}}}}},"/api/teams/join":{"post":{"tags":["Team"],"summary":"Join a team","description":"Join a team by invite code","operationId":"Team.Join","parameters":[{"in":"header","name":"Authorization","description":"access_token","required":true,"type":"string"},{"in":"body","name":"body","description":"invite code","required":true,"schema":{"$ref":"#/definitions/tplTeamInviteCode","type":"object"}}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/TeamResult","type":"object"}},"400":{"description":"","schema":{"type":"string"}},"401":{"description":"","schema":{"type":"string"}}}}},"/api/teams/{teamID}":{"put":{"tags":["Team"],"summary":"Update the team","description":"only the team owner can update the team","operationId":"Team.Update","parameters":[{"in":"header","name":"Authorization","description":"access_token","required":true,"type":"string"},{"in":"path","name":"teamID","description":"team ID","required":true,"type":"string"},{"in":"body","name":"body","description":"team body","required":true,"schema":{}}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/TeamResult","type":"object"}},"400":{"description":"","schema":{"type":"string"}},"401":{"description":"","schema":{"type":"string"}}}}},"/api/teams/{teamID}/entries":{"get":{"tags":["Entry"],"summary":"Get the team's entries list","description":"Get the team's entries list with summary information.\nall team members can get it","operationId":"Entry.FindByTeam","parameters":[{"in":"header","name":"Authorization","description":"access_token","required":true,"type":"string"},{"in":"path","name":"teamID","description":"team ID","required":true,"type":"string"}],"responses":{"200":{"description":"","schema":{"type":"array","items":{"$ref":"#/definitions/EntrySum","type":"object"}}},"400":{"description":"","schema":{"type":"string"}},"401":{"description":"","schema":{"type":"string"}}}},"post":{"tags":["Entry"],"summary":"Create a entry in a team","description":"all team members can create entry","operationId":"Entry.Create","parameters":[{"in":"header","name":"Authorization","description":"access_token","required":true,"type":"string"},{"in":"path","name":"teamID","description":"team ID","required":true,"type":"string"},{"in":"body","name":"body","description":"entry body","required":true,"schema":{"$ref":"#/definitions/tplEntryCreate","type":"object"}}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/EntrySum","type":"object"}},"400":{"description":"","schema":{"type":"string"}},"401":{"description":"","schema":{"type":"string"}}}}},"/api/teams/{teamID}/invite":{"post":{"tags":["Team"],"summary":"Invite a user to the team","description":"Invite a user to the team","operationId":"Team.Invite","parameters":[{"in":"header","name":"Authorization","description":"access_token","required":true,"type":"string"},{"in":"path","name":"teamID","description":"team ID","required":true,"type":"string"},{"in":"body","name":"body","description":"user to invite","required":true,"schema":{"$ref":"#/definitions/tplTeamInvite","type":"object"}}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/tplTeamInviteCode","type":"object"}},"400":{"description":"","schema":{"type":"string"}},"401":{"description":"","schema":{"type":"string"}}}}},"/api/teams/{teamID}/members/{userID}":{"delete":{"tags":["Team"],"summary":"remove a team member","description":"the team owner can remove other team member\nteam member can remove self","operationId":"Team.RemoveMember","parameters":[{"in":"header","name":"Authorization","description":"access_token","required":true,"type":"string"},{"in":"path","name":"teamID","description":"team ID","required":true,"type":"string"},{"in":"path","name":"userID","description":"team member ID","required":true,"type":"string"}],"responses":{"204":{"description":""},"400":{"description":"","schema":{"type":"string"}},"401":{"description":"","schema":{"type":"string"}}}}},"/api/teams/{teamID}:undelete":{"post":{"tags":["Team"],"summary":"Undelete the team","description":"only the team owner can undelete the team","operationId":"Team.Undelete","parameters":[{"in":"header","name":"Authorization","description":"access_token","required":true,"type":"string"},{"in":"path","name":"teamID","description":"entry ID","required":true,"type":"string"}],"responses":{"204":{"description":""},"400":{"description":"","schema":{"type":"string"}},"401":{"description":"","schema":{"type":"string"}}}}},"/api/user/{userID}":{"get":{"tags":["User"],"summary":"get a user public info","description":"get a user public info","operationId":"User.Find","parameters":[{"in":"path","name":"userID","description":"user id","required":true,"type":"string"}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/UserResult","type":"object"}},"400":{"description":"","schema":{"type":"string"}},"401":{"description":"","schema":{"type":"string"}}}}},"/download/{fileID}?refType={refType}\u0026refID={refID}\u0026signed={signed}":{"get":{"tags":["File"],"summary":"Download a file","description":"Download a file by query.","operationId":"File.Download","parameters":[{"in":"path","name":"fileID","description":"file ID","required":true,"type":"string"},{"in":"query","name":"refType","description":"refer object type: user | team | entry","required":true,"type":"string"},{"in":"query","name":"refID","description":"refer object ID","required":true,"type":"string"},{"in":"query","name":"signed","description":"signed string for verify, only need for entry type","type":"string"}],"responses":{"200":{"description":"","schema":{"type":"array","items":{"format":"byte","type":"string"}}},"400":{"description":"","schema":{"type":"string"}},"401":{"description":"","schema":{"type":"string"}},"404":{"description":"","schema":{"type":"string"}}}}},"/upload/avatar":{"post":{"tags":["File"],"summary":"Upload a avatar","description":"Upload a avatar and set it to the current user.","operationId":"File.UploadAvatar","responses":{"200":{"description":"","schema":{"$ref":"#/definitions/UserResult","type":"object"}},"400":{"description":"","schema":{"type":"string"}},"401":{"description":"","schema":{"type":"string"}},"404":{"description":"","schema":{"type":"string"}}}}},"/upload/entry/{entryID}/file":{"post":{"tags":["File"],"summary":"Upload a file","description":"Upload a file to the entry.","operationId":"File.UploadFile","parameters":[{"in":"query","name":"refType","description":"refer object type: user | team | entry","required":true,"type":"string"},{"in":"query","name":"refID","description":"refer object ID","required":true,"type":"string"}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/FileResult","type":"object"}},"400":{"description":"","schema":{"type":"string"}},"401":{"description":"","schema":{"type":"string"}},"404":{"description":"","schema":{"type":"string"}}}}},"/upload/team/{teamID}/logo":{"post":{"tags":["File"],"summary":"Upload a logo","description":"Upload a logo and set it to the team.","operationId":"File.UploadLogo","parameters":[{"in":"path","name":"teamID","description":"team ID","required":true,"type":"string"}],"responses":{"200":{"description":"","schema":{"$ref":"#/definitions/TeamResult","type":"object"}},"400":{"description":"","schema":{"type":"string"}},"401":{"description":"","schema":{"type":"string"}},"404":{"description":"","schema":{"type":"string"}}}}}},"definitions":{"AuthResult":{"title":"AuthResult","required":["access_token","token_type","expires_in","user"],"type":"object","properties":{"access_token":{"description":"access_token","default":"tokenxxxxxxxx....","type":"string"},"expires_in":{"description":"expires time duration in seconds","default":"3600","type":"number","format":"double"},"token_type":{"description":"will always be \"Bearer\"","default":"Bearer","type":"string"},"user":{"$ref":"#/definitions/UserResult","description":"user info","type":"object"}}},"EntryResult":{"title":"EntryResult","type":"object","properties":{"category":{"type":"string"},"created":{"type":"string","format":"date-time"},"files":{"type":"array","items":{"$ref":"#/definitions/FileResult","type":"object"}},"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"priority":{"type":"integer","format":"int32"},"secrets":{"type":"array","items":{"$ref":"#/definitions/SecretResult","type":"object"}},"shares":{"type":"array","items":{"$ref":"#/definitions/ShareResult","type":"object"}},"teamID":{"type":"integer","format":"int64"},"updated":{"type":"string","format":"date-time"}}},"EntrySum":{"title":"EntrySum","type":"object","properties":{"category":{"type":"string"},"created":{"type":"string","format":"date-time"},"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"priority":{"type":"integer","format":"int32"},"teamID":{"type":"integer","format":"int64"},"updated":{"type":"string","format":"date-time"}}},"FileResult":{"title":"FileResult","type":"object","properties":{"DownloadURL":{"type":"string"},"created":{"type":"string","format":"date-time"},"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"size":{"type":"integer","format":"int32"},"updated":{"type":"string","format":"date-time"},"userID":{"type":"string"}}},"PassResult":{"title":"PassResult","required":["password"],"type":"object","properties":{"password":{"description":"a random password","default":"OG/O3QPm6Y)A","type":"string"}}},"SecretResult":{"title":"SecretResult","type":"object","properties":{"created":{"type":"string","format":"date-time"},"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"note":{"type":"string"},"password":{"type":"string"},"updated":{"type":"string","format":"date-time"},"url":{"type":"string"}}},"ShareResult":{"title":"ShareResult","type":"object","properties":{"created":{"type":"string","format":"date-time"},"entryID":{"type":"integer","format":"int64"},"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"teamID":{"type":"integer","format":"int64"},"updated":{"type":"string","format":"date-time"},"userID":{"type":"string"}}},"TeamResult":{"title":"TeamResult","type":"object","properties":{"created":{"type":"string","format":"date-time"},"id":{"type":"integer","format":"int64"},"isFrozen":{"type":"boolean"},"logo":{"type":"string"},"members":{"type":"array","items":{"$ref":"#/definitions/UserResult","type":"object"}},"name":{"type":"string"},"updated":{"type":"string","format":"date-time"},"userID":{"type":"string"},"visibility":{"type":"string"}}},"UserResult":{"title":"UserResult","type":"object","properties":{"avatar":{"type":"string"},"created":{"type":"string","format":"date-time"},"id":{"type":"string"},"updated":{"type":"string","format":"date-time"}}},"tplEntryCreate":{"title":"tplEntryCreate","required":["name","category"],"type":"object","properties":{"category":{"description":"entry category","default":"Logins","type":"string"},"name":{"description":"entry name","default":"Github","type":"string"}}},"tplSecretCreate":{"title":"tplSecretCreate","required":["name","url","password","note"],"type":"object","properties":{"name":{"description":"secret name","default":"Login","type":"string"},"note":{"description":"some note","default":"https://github.com/login","type":"string"},"password":{"description":"some password","default":"mYPaSsWoRd","type":"string"},"url":{"description":"some URL","default":"https://github.com/login","type":"string"}}},"tplShareCreate":{"title":"tplShareCreate","required":["name","pass","userID","expire"],"type":"object","properties":{"expire":{"description":"expire time in seconds","default":"36000","type":"integer","format":"int32"},"name":{"description":"share name","default":"Github","type":"string"},"pass":{"description":"team password hashed by sha256","default":"15e2536def2490c115759ceabf012872fddbd7887fbe67e5074d1e66148d5d00","type":"string"},"userID":{"description":"user id share to","default":"jeo","type":"string"}}},"tplTeamCreate":{"title":"tplTeamCreate","required":["name"],"type":"object","properties":{"name":{"description":"team name","default":"Teambition","type":"string"}}},"tplTeamInvite":{"title":"tplTeamInvite","required":["userID"],"type":"object","properties":{"userID":{"description":"user to invite","default":"jeo","type":"string"}}},"tplTeamInviteCode":{"title":"tplTeamInviteCode","type":"object","properties":{"code":{"type":"string"}}},"tplUserJoin":{"title":"tplUserJoin","required":["id","pass"],"type":"object","properties":{"id":{"description":"user id","default":"admin","type":"string"},"pass":{"description":"user password hashed by sha256","default":"15e2536def2490c115759ceabf012872fddbd7887fbe67e5074d1e66148d5d00","type":"string"}}},"tplUserLogin":{"title":"tplUserLogin","required":["grant_type","username","password"],"type":"object","properties":{"grant_type":{"description":"should always be \"password\"","default":"password","type":"string"},"password":{"description":"user password hashed by sha256","default":"15e2536def2490c115759ceabf012872fddbd7887fbe67e5074d1e66148d5d00","type":"string"},"username":{"description":"user id","default":"admin","type":"string"}}}},"tags":[{"name":"Share","description":"Share API"},{"name":"Team","description":"Team API"},{"name":"User","description":"User API"},{"name":"Entry","description":"Entry API"},{"name":"Secret","description":"Secret API"},{"name":"File","description":"File controller"}]}